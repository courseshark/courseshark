<!-- Google Analytics -->
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-20912280-1']);
	<% if ( mode === 'development' ) { %>
	_gaq.push(['_setDomainName', '.courseshark.dev']);
	_gaq.push(['_addIgnoredRef', 'courseshark.dev']);
	<% } else {%>
	_gaq.push(['_setDomainName', '.courseshark.com']);
	_gaq.push(['_addIgnoredRef', 'courseshark.com']);
	_gaq.push(['_addIgnoredRef', 'courseshark.dev']);
	<% } %>
	_gaq.push(['_trackPageview']);
	_gaq.push(['_trackPageLoadTime']);

	// GoogleAnalytics
	(function() {
		if ( String(window.location).indexOf('.dev') !== -1 ) return;
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
	// Google+
	(function() {
		if ( String(window.location).indexOf('.dev') !== -1 ) return;
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
  // Twitter
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
 // UserVoice
  var uvOptions = {};
  (function() {
    var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
    uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/tIb1gzaiG6zO90NjfnA.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
  })();

  FB && (function(){
  	FB.Event.subscribe('edge.create', function(targetUrl) {
  		_gaq.push(['_trackSocial', 'facebook', 'like', targetUrl]);
		});
		FB.Event.subscribe('edge.remove', function(targetUrl) {
	  	_gaq.push(['_trackSocial', 'facebook', 'unlike', targetUrl]);
		});
		FB.Event.subscribe('message.send', function(targetUrl) {
		  _gaq.push(['_trackSocial', 'facebook', 'send', targetUrl]);
		});
	})()

	function trackTwitter(intent_event) {
		function extractParamFromUri(uri, paramName) {
  		if (!uri) {return;}
  		var regex = new RegExp('[\\?&#]' + paramName + '=([^&#]*)');
  		var params = regex.exec(uri);
  		if (params != null) { return unescape(params[1]); }
  		return;
		}
		if (intent_event) {
			var opt_pagePath;
			if (intent_event.target && intent_event.target.nodeName == 'IFRAME') {
				opt_target = extractParamFromUri(intent_event.target.src, 'url');
			}
			_gaq.push(['_trackSocial', 'twitter', 'tweet', opt_target]);
		}
	}
  twttr.ready(function (twttr) {
    twttr.events.bind('tweet', trackTwitter);
  });
  
</script>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script src="/socket.io/socket.io.js"></script>

<%if ( app.settings.env === 'development' ){ %>
	<script type="text/javascript" src="/scripts/lib/jquery.min.js"></script>
	<script type="text/javascript" src="/scripts/lib/jquery-ui.min.js"></script>
	<script>google.load('payments','1.0',{'packages':['sandbox_config']});</script>
	<!-- Custom Scripts -->
	<script type="text/javascript" src="/scripts/modernizr.js"></script>
	<script type="text/javascript" src="/scripts/master.js"></script>
	<script type="text/javascript" src="/scripts/dialog.js"></script>
	<script type="text/javascript" src="/scripts/micro-template.js"></script>
	<script type="text/javascript" src="/scripts/schedule.js"></script>
	<script type="text/javascript" src="/scripts/social.js"></script>
	<script type="text/javascript" src="/scripts/notification.js"></script>
	<script type="text/javascript" src="/scripts/jquery.base64.min.js"></script>
	<script type="text/javascript" src="/scripts/friendsSearch.js"></script>
	<script type="text/javascript" src="/scripts/dateFormat.js"></script>
	<!-- Bootstrap javascripts -->
	<script src="/scripts/lib/bootstrap-transition.js"></script>
  <script src="/scripts/lib/bootstrap-modal.js"></script>
  <script src="/scripts/lib/bootstrap-dropdown.js"></script>
  <script src="/scripts/lib/bootstrap-collapse.js"></script>
  <script src="/scripts/lib/bootstrap-tooltip.js"></script>
  <script src="/scripts/lib/bootstrap-popover.js"></script>
<% } else {%>
	<script>google.load('payments','1.0',{'packages':['production_config']});</script>
	<script type="text/javascript" src="/scripts/<%-revision%>-courseshark.js"/>
<% }%>