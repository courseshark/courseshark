function errorHandler(a,b,c){b==""&&(b='<strong>An unexpected error has occurred</strong>.<br /><br />Please check your information and try again.<br /><br />If the problem persists, please <a href="/about/contact" target="_blank">contact us</a> or file a <a target="_blank" href="http://bugs.courseshark.com/">bug report</a>."'),errorDialog(b,c)}function redirect(a){window.location=a}function noscript(){$("noscript").each(function(){$(this).remove()})}function get_courses_from_major(a,b,c){$.ajax({url:"/school/"+school+"/term/"+c+"/major/"+a+"/courses",success:function(a){b(a)},dataType:"json",data:{},error:function(a,b,c){errorHandler(a,"",c)}})}function get_full_sections_from_course(a,b,c){$.ajax({url:"/school/"+school+"/course/"+a+"/term/"+b+"/full",success:c,dataType:"json",data:{},error:function(a,b,c){errorHandler(a,"",c)}})}function validateEmail(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.match(b)}function initElements(){$('<div id="dialog-overlay"></div>		<div id="dialog-wrapper">			<div id="dialog-container">				<div id="dialog-header"><div id="close-button">x</div></div>				<section id="dialog-content"></section>			</div>		</div>').appendTo("body").hide()}function initFooter(){$("#dialog-wrapper #dialog-container").append('<div id="dialog-footer"><button id="dialog-close">close</button></div>')}function showOverlay(){$("#dialog-wrapper").hide(),$("#dialog-overlay").fadeIn(),$("body").css({"-webkit-filter":"grayscale(0.5) blur(10px);"})}function hideOverlay(){$("#dialog-wrapper").hide(),$("#dialog-overlay").fadeOut()}function openDialog(a,b,c,d){return $('script[type="text/template"]#_'+a).length!=0?content=$('script[type="text/template"]#_'+a).html():(content="[ Error loading content ]",jQuery.ajax({url:a,success:function(b){content=b,_gaq=_gaq||{},_gaq.push(["_trackPageview",a])},async:!1})),$existing=$('.modal[data-url="'+a+'"]'),$existing.length!=0?$existing.html(content).modal("show"):$existing=$('<div class="modal fade" data-url="'+a+'">').appendTo("body").html(content).modal("show"),$existing}function closeDialog(){hideOverlay(),$("#dialog-container").removeAttr("class")}function dialog_close(){closeDialog()}function show_timed_message(a){$("#timed-message").html(a),$("#timed-message").slideDown(400),setTimeout("$('#timed-message').slideUp(500, function(){$(this).removeClass('warning').removeClass('error')});",5e3)}function show_timed_warning(a){$("#timed-message").addClass("warning"),show_timed_message(a)}function show_timed_error(a){$("#timed-message").addClass("error"),show_timed_message(a)}function show_schedule_conflict(a){$("#conflict-message").fadeIn(350),$("#conflict-message").html(a)}function hide_schedule_conflict(){$("#conflict-message").fadeOut(350)}function loading_dialog(){dialog_open(!0)}function errorDialog(a,b){return typeof callback=="undefined"&&(callback=""),b='<div class="modal-header"><a href="#" class="close" data-dismiss="modal">&times;</a><h3>Message</h3></div>          <div class="modal-body"><h4>'+a+'</h4><div class="well">'+b+'</div></div>          <div class="modal-footer"><a href="#" class="btn btn-primary" onClick="'+callback+'()" data-dismiss="modal">Alright</a></div>',id="error_"+Math.floor(Math.random()*1e3),$("body").append('<script type="text/template" id="_'+id+'">'+b+"</script>"),openDialog(id,"errorDialog")}function messageDialog(a,b){return typeof b=="undefined"&&(b=""),info='<div class="modal-header"><a href="#" class="close" data-dismiss="modal">&times;</a><h3>Message</h3></div>          <div class="modal-body"><h4>'+a+'</h4></div>          <div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">Alright</a></div>',id="message_"+Math.floor(Math.random()*1e3),$("body").append('<script type="text/template" id="_'+id+'">'+info+"</script>"),modal=openDialog(id,"messageDialog"),b&&modal.on("hidden",b),modal}function confirmDialog(a,b,c,d,e){d||(d="Cancel"),e||(e="Continue"),info='<div class="modal-header"><a href="#" class="close" data-dismiss="modal">&times;</a><h3>Confirm</h3></div>          <div class="modal-body"><h4>'+a+'</h4></div>          <div class="modal-footer">            <a href="#" class="btn btn-primary" onClick="'+b+'" data-dismiss="modal">'+e+'</a>            <a href="#" class="btn" onClick="'+c+'" data-dismiss="modal">'+d+"</a>          </div>",id="confirm_"+Math.floor(Math.random()*1e3),$("body").append('<script type="text/template" id="_'+id+'">'+info+"</script>"),openDialog(id,"confirm_dialog")}function show_login_dialog(){openDialog("/users/login/dialog","login")}function show_register_dialog(){show_login_dialog()}function show_number_dialog(a){openDialog("/schedule/dialog/numbers")}function show_load_dialog(){openDialog("/schedule/dialog/load")}function show_new_dialog(){openDialog("/schedule/dialog/new")}function show_save_dialog(){openDialog("/schedule/dialog/save")}function check_for_safe_name_and_save(a,b){if(a.length==0)return $("#name-input").addClass("error"),$("#name-input").css({"background-position":"99% 50%"}),$("#name-input-message").html("You must enter a name"),!1;$("#name-input").removeClass("error"),$("#name-input-message").html(""),save_schedule(a,b),dialog_close()}function check_for_duplicate_name(a){var b=!1;return $("#name-input").removeClass("error"),$.ajax({url:"/schedule/name-exists",data:{name:a},async:!0,type:"POST",dataType:"json",success:function(c){b=c,0==b?($("#name-input").css({"background-position":"-9999px -9999px"}),$("#name-input").attr("title","Schedule Name"),$("#name-input-message").html("")):($("#name-input").css({"background-position":"99% 50%"}),$("#name-input").attr("title",'You already have a schedule called "'+a+'". It will be overwritten.'),$("#name-input-message").html('You already have a schedule called "'+a+'". It will be overwritten.'))},error:function(a,b,c){alert(c)}}),b}function show_link_dialog(){openDialog("/schedule/create-link",undefined,undefined,"link")}function show_caffeine_dialog(a){window.location="/watcher/new/"+a}function show_autopilot_dialog(){openDialog("/auto-pilot/dialog/start")}function auto_pilot_aditional_course(a){var b="",c=0;$inputs=a.children(".ap-course"),$inputs.each(function(){b=""+b+"&course"+c+"="+$(this).val(),c++}),$.ajax({url:"/auto-pilot/create",data:b,async:!1,type:"GET",dataType:"json",success:function(a){a.error!=""?errorDialog("There is no possible schedule with the classes you have selected. One or more courses are conflicting. Try picking different courses."):(Modernizr.localstorage&&localStorage.clear("courseshark.schedule.current"),a.has_full_class?(_gaq=_gaq||{},_gaq.push(["_trackEvent","AutoPilot","Complete","Conflicts"]),messageDialog("Your schedule has full classes, but don't freat! You may still get a seat using Caffeine!<br /><ol><li>Select the course that is full</li><li>Click on Caffeine Link</li><li>Tell us how you want to be contacted.</li><li>Get the class!</li></ol>"),reset_all(),show_session_schedule()):(_gaq=_gaq||{},_gaq.push(["_trackEvent","AutoPilot","Complete","No Conflicts"]),messageDialog("Check out your new schedule!"),reset_all(),show_session_schedule()))}})}function show_succuess_dialog(a){openDialog("/watcher/dialog/success/"+a)}function submit_success_form(a,b){$.ajax({url:"/watcher/dialog/success/"+a,async:!0,type:"POST",data:b,dataType:"text",success:function(a){messageDialog(a)}})}function add_friends_dialog(){openDialog("/social/friends/dialog").friendsSearch({next:addUsers})}function plotGpaOnCanvas(a,b){a.attr("title","Average GPA : "+b),a=a[0];try{G_vmlCanvasManager.initElement(a)}catch(c){}var d=a.getContext("2d"),e=[a.width,a.height],f=Math.min(e[0],e[1])/2-2,g=[e[0]/2,e[1]/2];if(b!="--"){d.globalAlpha=0;var h=b/4,i=h;d.beginPath(),d.moveTo(g[0],g[1]),d.arc(g[0],g[1],f,Math.PI*-0.5,Math.PI*(-0.5+2*i),!1),d.lineTo(g[0],g[1]),d.closePath(),red=85+Math.round(170*(1-h)),green=red,blue=255,d.strokeStyle="rgb("+red+","+green+","+blue+")",d.fillStyle="rgb("+red+","+green+","+blue+")",d.lineWidth=2,d.stroke()}d.globalAlpha=1,d.fillStyle="rgb(0,0,0)",gpaText=""+b,v=Math.min(11,e[0]/gpaText.length+2),d.font=v+"pt Arial",d.fillText(gpaText,g[0]-d.measureText(gpaText).width/2,g[1]+v/2)}function load_seat_data(a,b){if(school==3){b?major=$(sel).parent().parent().parent().children(".course-title").html().split(" ")[0]:major=$(sel).parent().parent().children(".course-title").html().split(" ")[0];if(majors_updating[major]===undefined)majors_updating[major]=Array(),dl_seat_info(a,b);else{if(majors_updating[major]!==!0){majors_updating[major].push([a,b]);return}dl_seat_info(a,b)}}else dl_seat_info(a,b)}function dl_seat_info(a,b){var c=".section-option#"+(b==1?"child_":"")+a;if(!$(c+" > .section-seats").hasClass("loading"))return;b?major=$(c).parent().parent().parent().children(".course-title").html().split(" ")[0]:major=$(c).parent().parent().children(".course-title").html().split(" ")[0],Modernizr.webworkers?(seat_workers[seat_workers_i]||(seat_workers[seat_workers_i]=new Worker("/scripts/workers/seat_load.0.js"),seat_workers[seat_workers_i].onmessage=function(b){var c=JSON.parse(b.data);c.sel=".section-option#"+(c.child==1?"child_":"")+c.id,$(c.sel+" > .section-seats").removeClass("loading"),$(c.sel+" > .section-seats span.remaining").html(c.available_seats),$(c.sel+" > .section-seats span.total").html(c.total_seats);if(parseInt(c.available_seats)<=0){a=c.id;var d=window.tmpl($("#template-caffeine-bar").html(),{id:a});$(c.sel).append(d)}if(majors_updating[major]!==undefined&&majors_updating[major]!==!0){queued_section=majors_updating[major].shift();while(queued_section!==undefined)dl_seat_info(queued_section[0],queued_section[1]),queued_section=majors_updating[major].shift();majors_updating[major]=!0}},seat_workers[seat_workers_i].onerror=function(a){}),msg={},msg.id=a,msg.child=b,msg.school=school,seat_workers[seat_workers_i].postMessage(JSON.stringify(msg)),seat_workers_i=(seat_workers_i+1)%seat_workers_cnt):$.ajax({url:"/schedule/section/"+a+"/seats",async:!0,dataType:"json",success:function(b){$(c+" > .section-seats").removeClass("loading"),$(c+" > .section-seats span.remaining").html(b.available_seats),$(c+" > .section-seats span.total").html(b.total_seats);if(parseInt(b.available_seats)<=0){var d=window.tmpl($("#template-caffeine-bar").html(),{id:a});$(c).append(d)}if(majors_updating[major]!==undefined&&majors_updating[major]!==!0){queued_section=majors_updating[major].shift();while(queued_section!==undefined)dl_seat_info(queued_section[0],queued_section[1]),queued_section=majors_updating[major].shift();majors_updating[major]=!0}}})}function add_course_to_calendar(a,b){return $.ajax({beforeSend:function(a,b){$("#class-list-loader").hasClass("showing")||$("#class-list-loader").addClass("showing").show()},url:"/school/"+school+"/course/"+a+"/term/"+term.id+"/sections",async:!0,dataType:"json",cache:!0,success:function(c){add_course_to_calendar_action(c,a,b)},complete:function(a,b){$("#class-list-loader").hide(0,function(){$(this).removeClass("showing")})}}),!0}function add_course_to_calendar_action(a,b,c){Modernizr.localstorage&&store_local&&localStorage.setObject("courseshark.course.sections."+b,a);if(a!=null&&a.length>0&&$(".course-options-container#"+a[0].course_id).length==0){var d=add_course_to_list(a[0]);for(var e=0;e<a.length;e++)a[e].id&&(add_option_to_list(d,a[e],c!=undefined),$(".course-options-container#"+b).addClass("skipping-seats"));a[0].course_id=="undefined"&&errorDialog("Error Adding A course")}else(a==null||a.length<=0)&&errorDialog("This course not offered this term");if(c!=undefined){$(".section-option#"+c).removeAttr("title").addClass("on-schedule").trigger("mouseover").trigger("click").trigger("mouseout"),$(".section-option#child_"+c).removeAttr("title").addClass("on-schedule").trigger("mouseover").trigger("click").trigger("mouseout");var f=".course-options-container#"+a[0].course_id+" > .course-title > .toggle-course-options",g=".course-options-container#"+a[0].course_id+" .courses-options-wrapper";$(f).hasClass("collapse")&&($(g).hide(),$(f).removeClass("collapse"),$(f).addClass("expand"))}return!0}function add_course_to_list(a){var b=window.tmpl($("#template-course-options").html(),{section:a});$("#class-list").prepend(b);var c=".course-options-container#"+a.course_id,d=c+" .courses-options-wrapper";return $(c).fadeIn(200),$(c+" > .course-title > .remove-course-options").click(function(){$(d+" > .section-option").each(function(){var a=$(this).attr("id");$(this).hasClass("selected")&&($.ajax({url:"/schedule/section/"+a+"/remove",dataType:"json",success:function(a){Modernizr.localstorage&&store_local&&localStorage.setObject("courseshark.schedule.current",a),schedule=a,update_schedule_conflicts()}}),removeCredits($(this).attr("credits"))),$(this).removeClass("selected"),$(this).removeAttr("title"),unHilightSection(a)}),$(d+" > .children > .section-option").each(function(){var a=$(this).attr("id");$(this).hasClass("selected")&&($.ajax({url:"/schedule/section/"+$(this).attr("id").replace("child_","")+"/remove/",dataType:"json",success:function(a){Modernizr.localstorage&&store_local&&localStorage.setObject("courseshark.schedule.current",a),schedule=a,update_schedule_conflicts()}}),removeCredits($(this).attr("credits"))),$(this).removeClass("selected"),$(this).removeAttr("title"),unHilightSection(a)}),$(c).remove()}),$(c+" > .course-title > .toggle-course-options").click(function(){$(this).hasClass("collapse")?($(d).slideUp(),$(this).removeClass("collapse"),$(this).addClass("expand")):($(this).parent().parent().hasClass("skipping-seats")&&$(this).parent().parent().children(".courses-options-wrapper").children(".section-option").each(function(){load_seat_data($(this).attr("id"))}),$(d).slideDown({easing:"easeInOutQuart"}),$(this).removeClass("expand"),$(this).addClass("collapse"))}),$(c+" > .course-title").dblclick(function(){$(c+" > .course-title > .toggle-course-options").click()}),$("#class-list").sortable({opacity:.6,cursor:"move",axis:"vertically"}),d}function add_option_to_list(a,b,c){b.timeslots[0]==undefined?tbd_class=!0:b.timeslots[0].day=="TBA"?tbd_class=!0:b.timeslots[0].start_minute==""&&b.timeslots[0].start_hour==""?tbd_class=!0:b.timeslots[0].end_minute==""&&b.timeslots[0].end_hour==""?tbd_class=!0:tbd_class=!1,b.tbd_class=tbd_class,sstemplate=$("#template-section-selector").html();var d=window.tmpl(sstemplate,{section:b,child:!1});$(a).append(d),plotGpaOnCanvas($("canvas#gpa-for-"+b.id),b.gpa),c||load_seat_data(b.id),add_timeslots_to_calendar(b);if(b.has_children&&b.children&&b.children[0].id&&parseInt(b.children[0].id)>0){$(a).append('<div id="s_'+b.id+'" class="children"></div>');var e=".children#s_"+b.id;for(var f=0;f<b.children.length;f++){if(!b.children[f]||!b.children[f].id||parseInt(b.children[f].id)<1)continue;b.children[f].timeslots[0]==undefined?tbd_class=!0:b.children[f].timeslots[0].day=="TBA"?tbd_class=!0:b.children[f].timeslots[0].start_minute==""&&b.children[f].timeslots[0].start_hour==""?tbd_class=!0:b.children[f].timeslots[0].end_minute==""&&b.children[f].timeslots[0].end_hour==""?tbd_class=!0:tbd_class=!1,b.children[f].tbd_class=tbd_class;var g=window.tmpl(sstemplate,{section:b.children[f],child:!0});$(e).append(g),$(".section-option#child_"+b.children[f].id).hover(function(){var a=$(this).attr("id").replace("child_","");hilightSection(a)},function(){var a=$(this).attr("id").replace("child_","");unHilightSection("child_"+a)}),$(".section-option#child_"+b.children[f].id).click(function(){if(caffeine_clicked==1)return!1;if($(this).attr("title")=="selected")$.ajax({url:"/schedule/section/"+$(this).attr("id").replace("child_","")+"/remove",dataType:"json",success:function(a){Modernizr.localstorage&&store_local&&localStorage.setObject("courseshark.schedule.current",a),schedule=a,update_schedule_conflicts()}}),removeCredits($(this).attr("credits")),$(".seat-notification#"+$(this).attr("id").replace("child_","caffeine_")).slideUp(),$(this).removeClass("selected"),$(this).removeClass("on-schedule"),$(this).removeAttr("title");else{if($(this).hasClass("on-schedule")==0){var a=$(this).attr("id").replace("child_","");$.ajax({url:"/schedule/section/"+a+"/add",dataType:"json",success:function(a){Modernizr.localstorage&&store_local&&localStorage.setObject("courseshark.schedule.current",a),schedule=a,update_schedule_conflicts()}})}addCredits($(this).attr("credits")),$(".seat-notification#caffeine_"+$(this).attr("id").replace("child_","")).slideDown(),$(this).addClass("selected"),$(this).attr("title","selected")}}),add_timeslots_to_calendar(b.children[f])}}$(".section-option#"+b.id).hover(function(){var a=$(this).attr("id");hilightSection(a)},function(){var a=$(this).attr("id");unHilightSection(a)}),$(".section-option#"+b.id).data("section",b),test_conflict(schedule,$(".section-option#"+b.id).data("section")),$(".section-option#"+b.id).click(function(c){if(caffeine_clicked==1)return!1;if($(this).attr("title")=="selected"){if($(this).hasClass("parent")){var d=$(this).attr("id");$(a+" > .children#s_"+d+" > .section-option.selected").each(function(){var a=$(this).attr("id");$.ajax({url:"/schedule/section/"+a.replace("child_","")+"/remove",dataType:"json",success:function(a){Modernizr.localstorage&&store_local&&localStorage.setObject("courseshark.schedule.current",schedule),schedule=a,update_schedule_conflicts()}}),$(this).removeClass("selected"),$(this).removeAttr("title"),unHilightSection(a),$(".seat-notification#"+$(this).attr("id").replace("child_","caffeine_")).slideUp(),removeCredits($(this).attr("credits"))}),$(a+" > .children#s_"+d).slideUp()}$.ajax({url:"/schedule/section/"+$(this).attr("id")+"/remove",dataType:"json",success:function(a){Modernizr.localstorage&&store_local&&localStorage.setObject("courseshark.schedule.current",a),schedule=a,update_schedule_conflicts()}}),removeCredits($(this).attr("credits")),$(".section-option#"+b.id+" > .seat-notification#caffeine_"+b.id).slideUp(),$(this).removeClass("on-schedule"),$(this).removeClass("selected"),$(this).removeAttr("title")}else{if($(this).hasClass("parent")){var d=$(this).attr("id");$(".children").each(function(){"s_"+d==$(this).attr("id")&&($(this).slideDown(),$(this).children(".section-option").each(function(){obj=$(this).children(".section-seats"),obj.hasClass("loading")&&load_seat_data($(this).attr("id").replace("child_",""),!0)}))})}d=$(this).attr("id"),$(this).hasClass("on-schedule")==0&&$.ajax({url:"/schedule/section/"+d+"/add",dataType:"json",success:function(a){Modernizr.localstorage&&store_local&&localStorage.setObject("courseshark.schedule.current",a),schedule=a,update_schedule_conflicts()}}),addCredits($(this).attr("credits")),$(this).addClass("selected"),$(this).attr("title","selected"),$(".section-option#"+b.id+" > .seat-notification#caffeine_"+b.id).slideDown()}})}function add_timeslots_to_calendar(a,b){var c=b!==undefined;a.timeslots[0]==undefined&&(a.timeslots[0]=!1);for(var d=0;d<a.timeslots.length;d++){var e=a.timeslots[d],f,g;c?t=""+d+b:t=d;if($(".option."+a.id+(c?".friend":"")+"#"+a.id+"-"+t).length)return;if(e!=0&&(parseInt(e.start_hour)!=0&&e.start_hour!=undefined||parseInt(e.end_hour)!=0&&e.end_hour!=undefined)){top_offset=(parseFloat(e.start_hour)-schedule_start_hour+parseFloat(e.start_minute)/60)*42+3,height=Math.floor(Math.max(.5,Math.abs(parseFloat(e.end_minute)-parseFloat(e.start_minute))/60+parseFloat(e.end_hour)-parseFloat(e.start_hour))*41-2),e.start_hour_adj=e.start_hour%12==0?12:e.start_hour%12,e.end_hour_adj=e.end_hour%12==0?12:e.end_hour%12;var g=window.tmpl($("#template-event-listing").html(),{section:a,slot:e,t:t});f=$(g).appendTo(".wk-event-wrapper#"+e.day)}else e==0||e.location.building=="None"&&e.location.room=="None"?section_location="Location and time TBD":section_location=e.location.building+" "+e.location.room,g=window.tmpl($("#template-event-listing-tbd").html(),{section:a,t:t}),f=$(g).appendTo("#tbd-container #tbd-list");for(var h=0;h<a.friends.length;h++)f.children(".friends-dots").append('<div class="friend-dot" style="border-color: '+a.friends[h].color+'"></div>');c&&(f.css({background:a.color}),f.show().addClass("friend").data("scheduleId",b)),f.css({"border-top":"3px solid "+a.color})}typeof tooltip_data[a.id]=="undefined"?(tooltip_data[a.id]=0,$.ajax({url:"/school/"+school+"/section/"+a.id+"/info",async:!0,cache:!0,dataType:"text",success:function(b){tooltip_data[a.id]=b,setupTooltip(a,tooltip_data[a.id])}})):setupTooltip(a,tooltip_data[a.id])}function setupTooltip(a,b){$(".option."+a.id).each(function(c){$(this).popover({content:b,delay:100,trigger:"manual"}).on("click",function(){$(this).popover("hide"),openDialog("/social/friends/invite-to-class/"+a.id).friendsSearch({next:inviteUsers,section:a.id})}).on("show",function(){$(".wk-event-listing.option:not(.friend), .tbd-listing.option:not(.friend)").each(function(){$(this).hasClass(a.id)?$(this).stop().animate({opacity:.9},100):$(this).stop().animate({opacity:.25},100)}),$(".wk-event-listing.option.friend, .tbd-listing.option.friend").each(function(){$(this).hasClass(a.id)?$(this).stop().animate({opacity:.9},100):$(this).stop().animate({opacity:.4},100)})}).on("hide",function(){$(".wk-event-listing.option, .tbd-listing.option").each(function(){opacity=$(this).hasClass("friend")?.4:.9,$(this).stop().animate({opacity:opacity},100)})}).mouseenter(function(a){$(this).popover("show")}).mouseleave(function(a){$(this).popover("hide")})})}function hilightSection(a){return $(".section-option#"+a).hasClass("TBA")?(hilightTBDSection(a),!0):($(".wk-event-listing.option."+a+":not(.friend)").each(function(a){$(this).css({display:"block"})}),!0)}function hilightTBDSection(a){$("#tbd-container").show(),$(".tbd-listing.option."+a+":not(.friend)").each(function(a){$(this).css({display:"block"})})}function unHilightSection(a){if($(".section-option#"+a).attr("title")!="selected"){if($(".section-option#"+a).hasClass("TBA"))return unhilightTBDSection(a),!0;$(".wk-event-listing.option."+a.replace("child_","")+":not(.friend)").each(function(a){$(this).css({display:"none"})})}return!0}function unhilightTBDSection(a){$(".tbd-listing.option."+a.replace("child_","")).each(function(a){$(this).css({display:"none"})});var b=!0;$(".tbd-listing.option:not(.friend)").each(function(){$(this).css("display")=="block"&&(b=!1)}),b&&$("#tbd-container").hide()}function addCredits(a){split=a.split("-"),credit_min+=parseInt(split[0]),split.length==2?credit_max+=parseInt(split[1]):credit_max+=parseInt(split[0]),refreshCreditDisplay()}function removeCredits(a){split=a.split("-"),credit_min-=parseInt(split[0]),split.length==2?credit_max-=parseInt(split[1]):credit_max-=parseInt(split[0]),refreshCreditDisplay()}function refreshCreditDisplay(){if(credit_min==credit_max)var a=credit_min;else var a=credit_min+"-"+credit_max;$("#schedule-summary #hours #number").html(a)}function update_schedule_conflicts(){hide_schedule_conflict(),window.s_c=!1,$(".section-option").each(function(){test_conflict(schedule,$(this).data("section"))})}function test_conflict(a,b){Modernizr.webworkers?(conflict_worker||(conflict_worker=new Worker("/scripts/workers/schedule_conflict.1.js"),conflict_worker.onmessage=function(a){var b=JSON.parse(a.data);b.conflicts&&b.section?($(".section-option#"+b.section.id).addClass("conflicts"),!window.s_c&&$(".section-option#"+b.section.id).hasClass("selected")&&(window.s_c=!0,show_schedule_conflict("Schedule Has Conflicts !"))):b.section&&$(".section-option#"+b.section.id).removeClass("conflicts")}),conflict_worker.postMessage(JSON.stringify({schedule:a,section:b}))):testConflicts(a,b)&&b&&b.id?($(".section-option#"+b.id).addClass("conflicts"),!window.s_c&&$(".section-option#"+b.id).hasClass("selected")&&(window.s_c=!0,show_schedule_conflict("Schedule Has Conflicts !"))):b&&$(".section-option#"+b.id).removeClass("conflicts")}function testConflicts(a,b,c){if(!a.sections.length)return!1;for(i in a.sections){ss=a.sections[i];if(ss.id==b.id||c&&ss.id==c.id)continue;for(t in ss.timeslots){ts=ss.timeslots[t],st=parseInt(ts.start_hour*60)+parseInt(ts.start_minute),et=parseInt(ts.end_hour*60)+parseInt(ts.end_minute);for(_t in b.timeslots){_ts=b.timeslots[_t],_st=parseInt(_ts.start_hour)*60+parseInt(_ts.start_minute),_et=parseInt(_ts.end_hour)*60+parseInt(_ts.end_minute);if(_ts.day==ts.day){if(_st<=et&&_et>=st)return!0;if(st<=_et&&et>=_st)return!0}}}}return!1}function show_passed_schedule(a){schedule=a,term=schedule.term,school=schedule.school_id,schedule_start_hour=schedule.start_hour,course_count=schedule.sections.length,$("#term-name").html(""+(term.season==null?"":term.season)+" "+(term.year==null?"":term.year));for(s=0;s<course_count;s++)add_course_to_calendar(schedule.sections[s].course_id,schedule.sections[s].id);$("#schedule-summary #name").html(schedule.name),$("#term-name").html(""+(term.season==null?"":term.season)+" "+(term.year==null?"":term.year)),update_schedule_conflicts()}function show_session_schedule(){Modernizr.localstorage&&store_local&&(stored=localStorage.getObject("courseshark.schedule.current"),stored!=null&&show_passed_schedule(stored)),$.ajax({url:"/schedule/session-schedule/",async:!0,type:"POST",dataType:"json",cache:!1,success:function(a){show_passed_schedule(a)},error:function(a,b,c){errorHandler(a,"",c)}})}function reset_all(){schedule_start_hour=0,credit_min=0,credit_max=0,schedule=!1,$("#class-list").html(""),$("#tbd-container").hide(),$("#term-name").html(""),$(".tbd-listing.option").each(function(){$(this).remove()}),$(".wk-event-listing.option").each(function(){$(this).remove()}),refreshCreditDisplay()}function new_schedule(a){$.ajax({url:"/schedule/new/"+a,type:"POST",dataType:"text",success:function(b){_gaq=_gaq||{},_gaq.push(["_trackPageview","/schedule/new/"+a]),Modernizr.localstorage&&store_local&&localStorage.clear("courseshark.schedule.current"),closeDialog(),reset_all(),show_session_schedule()}})}function load_schedule(a){return $.ajax({url:"/schedule/"+a+"/load",type:"GET",dataType:"text",success:function(a){_gaq=_gaq||{},_gaq.push(["_trackPageview","/schedule/load"]);if(a=="Session Expired")return errorDialog('We could not load your schedule. Your session has expired. Please <a href="/users/login" target="_blank">Login</a> and try again. '),!1;Modernizr.localstorage&&store_local&&localStorage.clear("courseshark.schedule.current"),reset_all(),show_session_schedule(),closeDialog()},error:function(a,b,c){errorHandler(a,"",c)}}),!1}function save_schedule(a,b){$.ajax({url:"/schedule/save",data:{name:a,"set-primary":b},type:"POST",dataType:"json",success:function(a){_gaq=_gaq||{},_gaq.push(["_trackPageview","/schedule/save"]);if(!a.success)return errorDialog('We could not save your schedule. Your session has expired. Please <a href="/#!/login" target="_blank">Login</a> again. '),!1;a.message=="new"?(reset_all(),show_session_schedule(),closeDialog()):(reset_all(),show_session_schedule(),closeDialog())},error:function(a,b,c){errorHandler(a,"",c)}})}function delete_schedule(a){return dsuccess=!1,$.ajax({url:"/schedule/"+a+"/delete",type:"POST",dataType:"json",async:!1,success:function(a){_gaq=_gaq||{},_gaq.push(["_trackPageview","/schedule/delete"]),a.success?dsuccess=!0:(errorDialog("We could not delete that schedule."),dsuccess=!1)},error:function(a,b,c){errorHandler(a,"",c)}}),dsuccess}function save_caffeine(){var a=$("#caffeine-id").html(),b=$("form#caffeine-update-info").serialize();return $.ajax({url:"/watcher/"+a+"/update",async:!1,dataType:"json",type:"POST",data:b,success:function(a){_gaq=_gaq||{},_gaq.push(["_trackPageview","/watcher/save"]),a==1?show_timed_message("Saved"):show_timed_error("Not saved: Please Try Again")},error:function(a,b,c){errorHandler(a,"",c)}}),!1}function create_new(a){form_data=$(a).serialize(),console.log(form_data),$.ajax({url:"/watcher/create",async:!1,cache:!1,type:"POST",data:form_data,dataType:"json",success:function(a){_gaq=_gaq||{},_gaq.push(["_trackPageview","/watcher/create"]),$("#submit-button").attr("disabled",!1).html('<i class="icon-shopping-cart icon-white"></i>Create'),a.success==1?messageDialog("Your notification has been created!",function(){window.location.reload()}):a.success==0?($(".new-notification-step.showing button:last-child").removeAttr("disabled").html("Create").prev().fadeIn(),a.message=="duplicate"?messageDialog("You are already watching this class"):a.message=="contact"?messageDialog("Please enter valid contact information."):a.message=="section"?messageDialog("The specified section was not found. Please check it and try again. If the problem persists, please let us know so we can fix it."):a.message=="credits"&&purchase("form-notification")):errorDialog("<strong>An unexpected error has occurred</strong>.<br /><br />Please check your information and try again.<br /><br />If the problem persists, please <a href='/about/contact' target='_blank'>contact us</a> or file a <a target='_blank' href='http://bugs.courseshark.com/'>bug report</a>.")},error:function(a,b,c){errorHandler(a,"",c)}})}function update_notification(a,b,c){form_data=$(b).serialize(),$.ajax({url:"/watcher/"+c+"/update",async:!1,cache:!1,type:"POST",data:form_data,dataType:"JSON",success:function(d){_gaq=_gaq||{},_gaq.push(["_trackPageview","/watcher/update"]),d.success==1?$(a).slideUp("normal",function(){$(b).children("input").css({border:""}),$(".notification-item#item-"+c).fadeOut(200,function(){$(".notification-item#item-"+c).fadeIn(200)})}):d.message=="contact"&&$(b).children("input").css({border:"1px solid red"})},error:function(a,b,c){errorHandler(a,"",c)}})}function cancel_notification(a,b){b?callback=function(){show_succuess_dialog(a)}:callback=function(){window.location.reload()},$.ajax({url:"/watcher/"+a+"/cancel",async:!1,type:"POST",dataType:"json",success:function(a){_gaq=_gaq||{},_gaq.push(["_trackPageview","/watcher/cancel"]),a.success==1?messageDialog("Notification Canceled",callback):errorDialog(a.message)}})}function delete_notification(a){$.ajax({url:"/watcher/"+a+"/delete",async:!1,type:"POST",dataType:"json",success:function(b){_gaq=_gaq||{},_gaq.push(["_trackPageview","/watcher/delete"]),b.success==1?($("#item-"+a).fadeOut(),messageDialog("Notification <strong>Deleted</strong>")):errorDialog(b.message)}})}function activate_notification(a){$.ajax({url:"/watcher/"+a+"/activate",async:!1,type:"POST",dataType:"json",success:function(a){_gaq=_gaq||{},_gaq.push(["_trackPageview","/watcher/activate"]),a.success==1?messageDialog("Notification Activated",function(){window.location.reload()}):errorDialog(a.message)}})}function inviteUsers(a,b){ids=$.map(a,function(a,b){return a}),$.ajax({url:"/social/friends/invite-to-class/"+b.data("section"),type:"POST",data:{ids:ids,message:$("#personal-message").val()},success:function(a){console.log(a)}})}function addUsers(a,b){ids=$.map(a,function(a,b){return a}),$.ajax({url:"/social/friends/add",type:"POST",data:{ids:ids},success:function(a){console.log(a)}})}function makeFriendScheduleCall(a,b,c){a.hasClass("showing")?(sch=a.data("scheduleObject"),sch)?showFriendSchedule(sch.schedule,sch.id,sch.color):$.ajax({url:"/social/schedule/"+b,dataType:"json",success:function(d){d.success&&(a.data("scheduleObject",{schedule:d.message,id:b,color:c}),showFriendSchedule(d.message,b,c))}}):hideFriendSchedule(b)}function showFriendSchedule(a,b,c){for(i in a){var d=a[i];d.color=c,add_timeslots_to_calendar(d,b)}}function hideFriendSchedule(a){$(".option.friend").each(function(){$(this).data("scheduleId")==a&&$(this).remove()})}window.Modernizr=function(a,b,c){function d(a){n.cssText=a}function e(a,b){return d(prefixes.join(a+";")+(b||""))}function f(a,b){return typeof a===b}function g(a,b){return!!~(""+a).indexOf(b)}function h(a,b,d){for(var e in a){var g=b[a[e]];if(g!==c)return d===!1?a[e]:f(g,"function")?g.bind(d||b):g}return!1}var i="2.5.3",j={},k=b.documentElement,l="modernizr",m=b.createElement(l),n=m.style,o,p={}.toString,q="Webkit Moz O ms",r=q.split(" "),s=q.toLowerCase().split(" "),t={},u={},v={},w=[],x=w.slice,y,z={}.hasOwnProperty,A;!f(z,"undefined")&&!f(z.call,"undefined")?A=function(a,b){return z.call(a,b)}:A=function(a,b){return b in a&&f(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if(typeof b!="function")throw new TypeError;var c=x.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(x.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(x.call(arguments)))};return d}),t.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},t.postmessage=function(){return!!a.postMessage},t.history=function(){return!!a.history&&!!history.pushState},t.websockets=function(){for(var b=-1,c=r.length;++b<c;)if(a[r[b]+"WebSocket"])return!0;return"WebSocket"in a},t.localstorage=function(){try{return localStorage.setItem(l,l),localStorage.removeItem(l),!0}catch(a){return!1}},t.sessionstorage=function(){try{return sessionStorage.setItem(l,l),sessionStorage.removeItem(l),!0}catch(a){return!1}},t.webworkers=function(){return!!a.Worker};for(var B in t)A(t,B)&&(y=B.toLowerCase(),j[y]=t[B](),w.push((j[y]?"":"no-")+y));return d(""),m=o=null,function(a,b){function c(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function d(){var a=k.elements;return typeof a=="string"?a.split(" "):a}function e(a){var b={},c=a.createElement,e=a.createDocumentFragment,f=e();a.createElement=function(a){var d=(b[a]||(b[a]=c(a))).cloneNode();return k.shivMethods&&d.canHaveChildren&&!h.test(a)?f.appendChild(d):d},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+d().join().replace(/\w+/g,function(a){return b[a]=c(a),f.createElement(a),'c("'+a+'")'})+");return n}")(k,f)}function f(a){var b;return a.documentShived?a:(k.shivCSS&&!i&&(b=!!c(a,"article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio{display:none}canvas,video{display:inline-block;*display:inline;*zoom:1}[hidden]{display:none}audio[controls]{display:inline-block;*display:inline;*zoom:1}mark{background:#FF0;color:#000}")),j||(b=!e(a)),b&&(a.documentShived=b),a)}var g=a.html5||{},h=/^<|^(?:button|form|map|select|textarea)$/i,i,j;(function(){var a=b.createElement("a");a.innerHTML="<xyz></xyz>",i="hidden"in a,j=a.childNodes.length==1||function(){try{b.createElement("a")}catch(a){return!0}var c=b.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()})();var k={elements:g.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:g.shivCSS!==!1,shivMethods:g.shivMethods!==!1,type:"default",shivDocument:f};a.html5=k,f(b)}(this,b),j._version=i,j._domPrefixes=s,j._cssomPrefixes=r,j}(this,this.document),window.console||(window.console={},window.console.info=function(){},window.console.log=function(){},window.console.warn=function(){},window.console.error=function(){}),$.ajaxSetup({timeout:6e4});try{$.ajaxSetup({timeout:15e3})}catch(err){}$(document).mousemove(function(a){document.x=a.pageX,document.y=a.pageY}),function(a){a.fn.placeholder=function(){var b=document.createElement("input");if(b.placeholder!=undefined)return a(this);if(a(this).attr("type")=="password"){var c=a(this);c.val()==""&&(a(this).parent().prepend('<input type="text" style="color:#777777;" value="'+a(this).attr("placeholder")+'" name="pass_placeholder" class="form-text" id="pass_placeholder">'),a(this).css("display","none")),a("#pass_placeholder").focus(function(){c.val()==""&&(a("#pass_placeholder").css("display","none"),c.css("display",""),c.focus())}),c.blur(function(){c.val()==""&&(a("#pass_placeholder").css("display",""),c.css("display","none"))})}else a(this).val()===""&&(a(this).val(a(this).attr("placeholder")),a(this).css("color","#777777")),a(this).focus(function(){a(this).val()===a(this).attr("placeholder")&&(a(this).css("color","#000000"),a(this).val(""))}).blur(function(){a(this).val()===""&&(a(this).css("color","#777777"),a(this).val(a(this).attr("placeholder")))})}}(jQuery),Storage.prototype.setObject=function(a,b){localStorage.setItem(a,JSON.stringify(b))},Storage.prototype.getObject=function(a){return localStorage.getItem(a)&&JSON.parse(localStorage.getItem(a))},Storage.prototype.clearCustom=function(){localStorage.clear("courseshark.schedule.current");for(i=0;i<1e3;i++)localStorage.clear("courseshark.courses."+i)},$(document).delegate("#close-button, #dialog-wrapper, #dialog-close","click",function(a){var b={"close-button":"","dialog-wrapper":"","dialog-close":""};a.target.id in b&&closeDialog()}),function(){var a={};window.tmpl=function b(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[c]=a[c]||b(document.getElementById(c).innerHTML);return d?e(d):e}}();var term=0,schedule_start_hour=0,credit_min=0,credit_max=0,schedule=!1,caffeine_clicked=!1,store_local=!1,seat_workers_cnt=15,seat_workers_i=0,seat_workers=Array(),conflict_worker=0,majors_updating=Object();tooltip_data=Object(),function(a){function b(b,c,d){var f=this;f.id=d,f.options=c,f.status={animated:!1,rendered:!1,disabled:!1,focused:!1},f.elements={target:b.addClass(f.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null},f.cache={mouse:{},position:{},toggle:0},f.timers={},a.extend(f,f.options.api,{show:function(b){function e(){f.options.position.type!=="static"&&f.focus(),f.onShow.call(f,b),a.browser.msie&&f.elements.tooltip.get(0).style.removeAttribute("filter")}var c,d;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"show");if(f.elements.tooltip.css("display")!=="none")return f;f.elements.tooltip.stop(!0,!1),c=f.beforeShow.call(f,b);if(c===!1)return f;f.cache.toggle=1,f.options.position.type!=="static"&&f.updatePosition(b,f.options.show.effect.length>0),typeof f.options.show.solo=="object"?d=a(f.options.show.solo):f.options.show.solo===!0&&(d=a("div.qtip").not(f.elements.tooltip)),d&&d.each(function(){a(this).qtip("api").status.rendered===!0&&a(this).qtip("api").hide()});if(typeof f.options.show.effect.type=="function")f.options.show.effect.type.call(f.elements.tooltip,f.options.show.effect.length),f.elements.tooltip.queue(function(){e(),a(this).dequeue()});else{switch(f.options.show.effect.type.toLowerCase()){case"fade":f.elements.tooltip.fadeIn(f.options.show.effect.length,e);break;case"slide":f.elements.tooltip.slideDown(f.options.show.effect.length,function(){e(),f.options.position.type!=="static"&&f.updatePosition(b,!0)});break;case"grow":f.elements.tooltip.show(f.options.show.effect.length,e);break;default:f.elements.tooltip.show(null,e)}f.elements.tooltip.addClass(f.options.style.classes.active)}return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_SHOWN,"show")},hide:function(b){function d(){f.onHide.call(f,b)}var c;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"hide");if(f.elements.tooltip.css("display")==="none")return f;clearTimeout(f.timers.show),f.elements.tooltip.stop(!0,!1),c=f.beforeHide.call(f,b);if(c===!1)return f;f.cache.toggle=0;if(typeof f.options.hide.effect.type=="function")f.options.hide.effect.type.call(f.elements.tooltip,f.options.hide.effect.length),f.elements.tooltip.queue(function(){d(),a(this).dequeue()});else{switch(f.options.hide.effect.type.toLowerCase()){case"fade":f.elements.tooltip.fadeOut(f.options.hide.effect.length,d);break;case"slide":f.elements.tooltip.slideUp(f.options.hide.effect.length,d);break;case"grow":f.elements.tooltip.hide(f.options.hide.effect.length,d);break;default:f.elements.tooltip.hide(null,d)}f.elements.tooltip.removeClass(f.options.style.classes.active)}return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_HIDDEN,"hide")},updatePosition:function(b,c){var d,e,g,h,i,j,k,m,n,o,p,q,t,u;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updatePosition");if(f.options.position.type=="static")return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.CANNOT_POSITION_STATIC,"updatePosition");e={position:{left:0,top:0},dimensions:{height:0,width:0},corner:f.options.position.corner.target},g={position:f.getPosition(),dimensions:f.getDimensions(),corner:f.options.position.corner.tooltip};if(f.options.position.target!=="mouse"){if(f.options.position.target.get(0).nodeName.toLowerCase()=="area"){h=f.options.position.target.attr("coords").split(",");for(d=0;d<h.length;d++)h[d]=parseInt(h[d]);i=f.options.position.target.parent("map").attr("name"),j=a('img[usemap="#'+i+'"]:first').offset(),e.position={left:Math.floor(j.left+h[0]),top:Math.floor(j.top+h[1])};switch(f.options.position.target.attr("shape").toLowerCase()){case"rect":e.dimensions={width:Math.ceil(Math.abs(h[2]-h[0])),height:Math.ceil(Math.abs(h[3]-h[1]))};break;case"circle":e.dimensions={width:h[2]+1,height:h[2]+1};break;case"poly":e.dimensions={width:h[0],height:h[1]};for(d=0;d<h.length;d++)d%2==0?(h[d]>e.dimensions.width&&(e.dimensions.width=h[d]),h[d]<h[0]&&(e.position.left=Math.floor(j.left+h[d]))):(h[d]>e.dimensions.height&&(e.dimensions.height=h[d]),h[d]<h[1]&&(e.position.top=Math.floor(j.top+h[d])));e.dimensions.width=e.dimensions.width-(e.position.left-j.left),e.dimensions.height=e.dimensions.height-(e.position.top-j.top);break;default:return a.fn.qtip.log.error.call(f,4,a.fn.qtip.constants.INVALID_AREA_SHAPE,"updatePosition")}e.dimensions.width-=2,e.dimensions.height-=2}else f.options.position.target.add(document.body).length===1?(e.position={left:a(document).scrollLeft(),top:a(document).scrollTop()},e.dimensions={height:a(window).height(),width:a(window).width()}):(typeof f.options.position.target.attr("qtip")!="undefined"?e.position=f.options.position.target.qtip("api").cache.position:e.position=f.options.position.target.offset(),e.dimensions={height:f.options.position.target.outerHeight(),width:f.options.position.target.outerWidth()});k=a.extend({},e.position),e.corner.search(/right/i)!==-1&&(k.left+=e.dimensions.width),e.corner.search(/bottom/i)!==-1&&(k.top+=e.dimensions.height),e.corner.search(/((top|bottom)Middle)|center/)!==-1&&(k.left+=e.dimensions.width/2),e.corner.search(/((left|right)Middle)|center/)!==-1&&(k.top+=e.dimensions.height/2)}else e.position=k={left:f.cache.mouse.x,top:f.cache.mouse.y},e.dimensions={height:1,width:1};g.corner.search(/right/i)!==-1&&(k.left-=g.dimensions.width),g.corner.search(/bottom/i)!==-1&&(k.top-=g.dimensions.height),g.corner.search(/((top|bottom)Middle)|center/)!==-1&&(k.left-=g.dimensions.width/2),g.corner.search(/((left|right)Middle)|center/)!==-1&&(k.top-=g.dimensions.height/2),m=a.browser.msie?1:0,n=a.browser.msie&&parseInt(a.browser.version.charAt(0))===6?1:0,f.options.style.border.radius>0&&(g.corner.search(/Left/)!==-1?k.left-=f.options.style.border.radius:g.corner.search(/Right/)!==-1&&(k.left+=f.options.style.border.radius),g.corner.search(/Top/)!==-1?k.top-=f.options.style.border.radius:g.corner.search(/Bottom/)!==-1&&(k.top+=f.options.style.border.radius)),m&&(g.corner.search(/top/)!==-1?k.top-=m:g.corner.search(/bottom/)!==-1&&(k.top+=m),g.corner.search(/left/)!==-1?k.left-=m:g.corner.search(/right/)!==-1&&(k.left+=m),g.corner.search(/leftMiddle|rightMiddle/)!==-1&&(k.top-=1)),f.options.position.adjust.screen===!0&&(k=l.call(f,k,e,g)),f.options.position.target==="mouse"&&f.options.position.adjust.mouse===!0&&(f.options.position.adjust.screen===!0&&f.elements.tip?p=f.elements.tip.attr("rel"):p=f.options.position.corner.tooltip,k.left+=p.search(/right/i)!==-1?-6:6,k.top+=p.search(/bottom/i)!==-1?-6:6),!f.elements.bgiframe&&a.browser.msie&&parseInt(a.browser.version.charAt(0))==6&&a("select, object").each(function(){q=a(this).offset(),q.bottom=q.top+a(this).height(),q.right=q.left+a(this).width(),k.top+g.dimensions.height>=q.top&&k.left+g.dimensions.width>=q.left&&r.call(f)}),k.left+=f.options.position.adjust.x,k.top+=f.options.position.adjust.y,t=f.getPosition();if(k.left!=t.left||k.top!=t.top){u=f.beforePositionUpdate.call(f,b);if(u===!1)return f;f.cache.position=k,c===!0?(f.status.animated=!0,f.elements.tooltip.animate(k,200,"swing",function(){f.status.animated=!1})):f.elements.tooltip.css(k),f.onPositionUpdate.call(f,b),typeof b!="undefined"&&b.type&&b.type!=="mousemove"&&a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_POSITION_UPDATED,"updatePosition")}return f},updateWidth:function(b){var c;return f.status.rendered?b&&typeof b!="number"?a.fn.qtip.log.error.call(f,2,"newWidth must be of type number","updateWidth"):(c=f.elements.contentWrapper.siblings().add(f.elements.tip).add(f.elements.button),b||(typeof f.options.style.width.value=="number"?b=f.options.style.width.value:(f.elements.tooltip.css({width:"auto"}),c.hide(),a.browser.msie&&f.elements.wrapper.add(f.elements.contentWrapper.children()).css({zoom:"normal"}),b=f.getDimensions().width+1,f.options.style.width.value||(b>f.options.style.width.max&&(b=f.options.style.width.max),b<f.options.style.width.min&&(b=f.options.style.width.min)))),b%2!==0&&(b-=1),f.elements.tooltip.width(b),c.show(),f.options.style.border.radius&&f.elements.tooltip.find(".qtip-betweenCorners").each(function(c){a(this).width(b-f.options.style.border.radius*2)}),a.browser.msie&&(f.elements.wrapper.add(f.elements.contentWrapper.children()).css({zoom:"1"}),f.elements.wrapper.width(b),f.elements.bgiframe&&f.elements.bgiframe.width(b).height(f.getDimensions.height)),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_WIDTH_UPDATED,"updateWidth")):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateWidth")},updateStyle:function(b){var c,d,h,i,j;return f.status.rendered?typeof b!="string"||!a.fn.qtip.styles[b]?a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.STYLE_NOT_DEFINED,"updateStyle"):(f.options.style=o.call(f,a.fn.qtip.styles[b],f.options.user.style),f.elements.content.css(m(f.options.style)),f.options.content.title.text!==!1&&f.elements.title.css(m(f.options.style.title,!0)),f.elements.contentWrapper.css({borderColor:f.options.style.border.color}),f.options.style.tip.corner!==!1&&(a("<canvas>").get(0).getContext?(c=f.elements.tooltip.find(".qtip-tip canvas:first"),h=c.get(0).getContext("2d"),h.clearRect(0,0,300,300),i=c.parent("div[rel]:first").attr("rel"),j=p(i,f.options.style.tip.size.width,f.options.style.tip.size.height),g.call(f,c,j,f.options.style.tip.color||f.options.style.border.color)):a.browser.msie&&(c=f.elements.tooltip.find('.qtip-tip [nodeName="shape"]'),c.attr("fillcolor",f.options.style.tip.color||f.options.style.border.color))),f.options.style.border.radius>0&&(f.elements.tooltip.find(".qtip-betweenCorners").css({backgroundColor:f.options.style.border.color}),a("<canvas>").get(0).getContext?(d=q(f.options.style.border.radius),f.elements.tooltip.find(".qtip-wrapper canvas").each(function(){h=a(this).get(0).getContext("2d"),h.clearRect(0,0,300,300),i=a(this).parent("div[rel]:first").attr("rel"),e.call(f,a(this),d[i],f.options.style.border.radius,f.options.style.border.color)})):a.browser.msie&&f.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){a(this).attr("fillcolor",f.options.style.border.color)})),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_STYLE_UPDATED,"updateStyle")):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateStyle")},updateContent:function(b,c){function i(){f.updateWidth(),c!==!1&&(f.options.position.type!=="static"&&f.updatePosition(f.elements.tooltip.is(":visible"),!0),f.options.style.tip.corner!==!1&&h.call(f))}var d,e,g;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateContent");if(!b)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateContent");d=f.beforeContentUpdate.call(f,b);if(typeof d=="string")b=d;else if(d===!1)return;return a.browser.msie&&f.elements.contentWrapper.children().css({zoom:"normal"}),b.jquery&&b.length>0?b.clone(!0).appendTo(f.elements.content).show():f.elements.content.html(b),e=f.elements.content.find("img[complete=false]"),e.length>0?(g=0,e.each(function(b){a('<img src="'+a(this).attr("src")+'" />').load(function(){++g==e.length&&i()})})):i(),f.onContentUpdate.call(f),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_CONTENT_UPDATED,"loadContent")},loadContent:function(b,c,d){function g(b){f.onContentLoad.call(f),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_CONTENT_LOADED,"loadContent"),f.updateContent(b)}var e;return f.status.rendered?(e=f.beforeContentLoad.call(f),e===!1?f:(d=="post"?a.post(b,c,g):a.get(b,c,g),f)):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"loadContent")},updateTitle:function(b){return f.status.rendered?b?(returned=f.beforeTitleUpdate.call(f),returned===!1?f:(f.elements.button&&(f.elements.button=f.elements.button.clone(!0)),f.elements.title.html(b),f.elements.button&&f.elements.title.prepend(f.elements.button),f.onTitleUpdate.call(f),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_TITLE_UPDATED,"updateTitle"))):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateTitle"):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateTitle")},focus:function(b){var c,d,e,g;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"focus");if(f.options.position.type=="static")return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.CANNOT_FOCUS_STATIC,"focus");c=parseInt(f.elements.tooltip.css("z-index")),d=6e3+a("div.qtip[qtip]").length-1;if(!f.status.focused&&c!==d){g=f.beforeFocus.call(f,b);if(g===!1)return f;a("div.qtip[qtip]").not(f.elements.tooltip).each(function(){a(this).qtip("api").status.rendered===!0&&(e=parseInt(a(this).css("z-index")),typeof e=="number"&&e>-1&&a(this).css({zIndex:parseInt(a(this).css("z-index"))-1}),a(this).qtip("api").status.focused=!1)}),f.elements.tooltip.css({zIndex:d}),f.status.focused=!0,f.onFocus.call(f,b),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_FOCUSED,"focus")}return f},disable:function(b){return f.status.rendered?(b?f.status.disabled?a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.TOOLTIP_ALREADY_DISABLED,"disable"):(f.status.disabled=!0,a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_DISABLED,"disable")):f.status.disabled?(f.status.disabled=!1,a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_ENABLED,"disable")):a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.TOOLTIP_ALREADY_ENABLED,"disable"),f):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"disable")},destroy:function(){var b,c,d;c=f.beforeDestroy.call(f);if(c===!1)return f;f.status.rendered?(f.options.show.when.target.unbind("mousemove.qtip",f.updatePosition),f.options.show.when.target.unbind("mouseout.qtip",f.hide),f.options.show.when.target.unbind(f.options.show.when.event+".qtip"),f.options.hide.when.target.unbind(f.options.hide.when.event+".qtip"),f.elements.tooltip.unbind(f.options.hide.when.event+".qtip"),f.elements.tooltip.unbind("mouseover.qtip",f.focus),f.elements.tooltip.remove()):f.options.show.when.target.unbind(f.options.show.when.event+".qtip-create");if(typeof f.elements.target.data("qtip")=="object"){d=f.elements.target.data("qtip").interfaces;if(typeof d=="object"&&d.length>0)for(b=0;b<d.length-1;b++)d[b].id==f.id&&d.splice(b,1)}return delete a.fn.qtip.interfaces[f.id],typeof d=="object"&&d.length>0?f.elements.target.data("qtip").current=d.length-1:f.elements.target.removeData("qtip"),f.onDestroy.call(f),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_DESTROYED,"destroy"),f.elements.target},getPosition:function(){var b,c;return f.status.rendered?(b=f.elements.tooltip.css("display")!=="none"?!1:!0,b&&f.elements.tooltip.css({visiblity:"hidden"}).show(),c=f.elements.tooltip.offset(),b&&f.elements.tooltip.css({visiblity:"visible"}).hide(),c):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getPosition")},getDimensions:function(){var b,c;return f.status.rendered?(b=f.elements.tooltip.is(":visible")?!1:!0,b&&f.elements.tooltip.css({visiblity:"hidden"}).show(),c={height:f.elements.tooltip.outerHeight(),width:f.elements.tooltip.outerWidth()},b&&f.elements.tooltip.css({visiblity:"visible"}).hide(),c):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getDimensions")}})}function c(){var b,c,e,g,h,i,l;b=this,b.beforeRender.call(b),b.status.rendered=!0,b.elements.tooltip='<div qtip="'+b.id+'" class="qtip '+(b.options.style.classes.tooltip||b.options.style)+'"style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0;position:'+b.options.position.type+';">  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;">    <div class="qtip-contentWrapper" style="overflow:hidden;">       <div class="qtip-content '+b.options.style.classes.content+'"></div></div></div></div>',b.elements.tooltip=a(b.elements.tooltip),b.elements.tooltip.appendTo(b.options.position.container),b.elements.tooltip.data("qtip",{current:0,interfaces:[b]}),b.elements.wrapper=b.elements.tooltip.children("div:first"),b.elements.contentWrapper=b.elements.wrapper.children("div:first").css({background:b.options.style.background}),b.elements.content=b.elements.contentWrapper.children("div:first").css(m(b.options.style)),a.browser.msie&&b.elements.wrapper.add(b.elements.content).css({zoom:1}),b.options.hide.when.event=="unfocus"&&b.elements.tooltip.attr("unfocus",!0),typeof b.options.style.width.value=="number"&&b.updateWidth(),a("<canvas>").get(0).getContext||a.browser.msie?(b.options.style.border.radius>0?d.call(b):b.elements.contentWrapper.css({border:b.options.style.border.width+"px solid "+b.options.style.border.color}),b.options.style.tip.corner!==!1&&f.call(b)):(b.elements.contentWrapper.css({border:b.options.style.border.width+"px solid "+b.options.style.border.color}),b.options.style.border.radius=0,b.options.style.tip.corner=!1,a.fn.qtip.log.error.call(b,2,a.fn.qtip.constants.CANVAS_VML_NOT_SUPPORTED,"render")),typeof b.options.content.text=="string"&&b.options.content.text.length>0||b.options.content.text.jquery&&b.options.content.text.length>0?e=b.options.content.text:typeof b.elements.target.attr("title")=="string"&&b.elements.target.attr("title").length>0?(e=b.elements.target.attr("title").replace("\\n","<br />"),b.elements.target.attr("title","")):typeof b.elements.target.attr("alt")=="string"&&b.elements.target.attr("alt").length>0?(e=b.elements.target.attr("alt").replace("\\n","<br />"),b.elements.target.attr("alt","")):(e=" ",a.fn.qtip.log.error.call(b,1,a.fn.qtip.constants.NO_VALID_CONTENT,"render")),b.options.content.title.text!==!1&&j.call(b),b.updateContent(e),k.call(b),b.options.show.ready===!0&&b.show(),b.options.content.url!==!1&&(g=b.options.content.url,h=b.options.content.data,i=b.options.content.method||"get",b.loadContent(g,h,i)),b.onRender.call(b),a.fn.qtip.log.error.call(b,1,a.fn.qtip.constants.EVENT_RENDERED,"render")}function d(){var b,c,d,f,g,h,i,j,k,l,m,n,o,p,r;b=this,b.elements.wrapper.find(".qtip-borderBottom, .qtip-borderTop").remove(),d=b.options.style.border.width,f=b.options.style.border.radius,g=b.options.style.border.color||b.options.style.tip.color,h=q(f),i={};for(c in h)i[c]='<div rel="'+c+'" style="'+(c.search(/Left/)!==-1?"left":"right")+":0; position:absolute; height:"+f+"px; width:"+f+'px; overflow:hidden; line-height:0.1px; font-size:1px">',a("<canvas>").get(0).getContext?i[c]+='<canvas height="'+f+'" width="'+f+'" style="vertical-align: top"></canvas>':a.browser.msie&&(j=f*2+3,i[c]+='<v:arc stroked="false" fillcolor="'+g+'" startangle="'+h[c][0]+'" endangle="'+h[c][1]+'" style="width:'+j+"px; height:"+j+"px; margin-top:"+(c.search(/bottom/)!==-1?-2:-1)+"px; margin-left:"+(c.search(/Right/)!==-1?h[c][2]-3.5:-1)+'px; vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>'),i[c]+="</div>";k=b.getDimensions().width-Math.max(d,f)*2,l='<div class="qtip-betweenCorners" style="height:'+f+"px; width:"+k+"px; overflow:hidden; background-color:"+g+'; line-height:0.1px; font-size:1px;">',m='<div class="qtip-borderTop" dir="ltr" style="height:'+f+"px; margin-left:"+f+'px; line-height:0.1px; font-size:1px; padding:0;">'+i.topLeft+i.topRight+l,b.elements.wrapper.prepend(m),n='<div class="qtip-borderBottom" dir="ltr" style="height:'+f+"px; margin-left:"+f+'px; line-height:0.1px; font-size:1px; padding:0;">'+i.bottomLeft+i.bottomRight+l,b.elements.wrapper.append(n),a("<canvas>").get(0).getContext?b.elements.wrapper.find("canvas").each(function(){o=h[a(this).parent("[rel]:first").attr("rel")],e.call(b,a(this),o,f,g)}):a.browser.msie&&b.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>'),p=Math.max(f,f+(d-f)),r=Math.max(d-f,0),b.elements.contentWrapper.css({border:"0px solid "+g,borderWidth:r+"px "+p+"px"})}function e(a,b,c,d){var e=a.get(0).getContext("2d");e.fillStyle=d,e.beginPath(),e.arc(b[0],b[1],c,0,Math.PI*2,!1),e.fill()}function f(b){var c,d,e,f,i;c=this,c.elements.tip!==null&&c.elements.tip.remove(),d=c.options.style.tip.color||c.options.style.border.color;if(c.options.style.tip.corner===!1)return;b||(b=c.options.style.tip.corner),e=p(b,c.options.style.tip.size.width,c.options.style.tip.size.height),c.elements.tip='<div class="'+c.options.style.classes.tip+'" dir="ltr" rel="'+b+'" style="position:absolute; height:'+c.options.style.tip.size.height+"px; width:"+c.options.style.tip.size.width+'px; margin:0 auto; line-height:0.1px; font-size:1px;">',a("<canvas>").get(0).getContext?c.elements.tip+='<canvas height="'+c.options.style.tip.size.height+'" width="'+c.options.style.tip.size.width+'"></canvas>':a.browser.msie&&(f=c.options.style.tip.size.width+","+c.options.style.tip.size.height,i="m"+e[0][0]+","+e[0][1],i+=" l"+e[1][0]+","+e[1][1],i+=" "+e[2][0]+","+e[2][1],i+=" xe",c.elements.tip+='<v:shape fillcolor="'+d+'" stroked="false" filled="true" path="'+i+'" coordsize="'+f+'" style="width:'+c.options.style.tip.size.width+"px; height:"+c.options.style.tip.size.height+"px; line-height:0.1px; display:inline-block; behavior:url(#default#VML); vertical-align:"+(b.search(/top/)!==-1?"bottom":"top")+'"></v:shape>',c.elements.tip+='<v:image style="behavior:url(#default#VML);"></v:image>',c.elements.contentWrapper.css("position","relative")),c.elements.tooltip.prepend(c.elements.tip+"</div>"),c.elements.tip=c.elements.tooltip.find("."+c.options.style.classes.tip).eq(0),a("<canvas>").get(0).getContext&&g.call(c,c.elements.tip.find("canvas:first"),e,d),b.search(/top/)!==-1&&a.browser.msie&&parseInt(a.browser.version.charAt(0))===6&&c.elements.tip.css({marginTop:-4}),h.call(c,b)}function g(a,b,c){var d=a.get(0).getContext("2d");d.fillStyle=c,d.beginPath(),d.moveTo(b[0][0],b[0][1]),d.lineTo(b[1][0],b[1][1]),d.lineTo(b[2][0],b[2][1]),d.fill()}function h(b){var c,d,e,f,g;c=this;if(c.options.style.tip.corner===!1||!c.elements.tip)return;b||(b=c.elements.tip.attr("rel")),d=positionAdjust=a.browser.msie?1:0,c.elements.tip.css(b.match(/left|right|top|bottom/)[0],0),b.search(/top|bottom/)!==-1?(a.browser.msie&&(parseInt(a.browser.version.charAt(0))===6?positionAdjust=b.search(/top/)!==-1?-3:1:positionAdjust=b.search(/top/)!==-1?1:2),b.search(/Middle/)!==-1?c.elements.tip.css({left:"50%",marginLeft:-(c.options.style.tip.size.width/2)}):b.search(/Left/)!==-1?c.elements.tip.css({left:c.options.style.border.radius-d}):b.search(/Right/)!==-1&&c.elements.tip.css({right:c.options.style.border.radius+d}),b.search(/top/)!==-1?c.elements.tip.css({top:-positionAdjust}):c.elements.tip.css({bottom:positionAdjust})):b.search(/left|right/)!==-1&&(a.browser.msie&&(positionAdjust=parseInt(a.browser.version.charAt(0))===6?1:b.search(/left/)!==-1?1:2),b.search(/Middle/)!==-1?c.elements.tip.css({top:"50%",marginTop:-(c.options.style.tip.size.height/2)}):b.search(/Top/)!==-1?c.elements.tip.css({top:c.options.style.border.radius-d}):b.search(/Bottom/)!==-1&&c.elements.tip.css({bottom:c.options.style.border.radius+d}),b.search(/left/)!==-1?c.elements.tip.css({left:-positionAdjust}):c.elements.tip.css({right:positionAdjust})),e="padding-"+b.match(/left|right|top|bottom/)[0],f=c.options.style.tip.size[e.search(/left|right/)!==-1?"width":"height"],c.elements.tooltip.css("padding",0),c.elements.tooltip.css(e,f),a.browser.msie&&parseInt(a.browser.version.charAt(0))==6&&(g=parseInt(c.elements.tip.css("margin-top"))||0,g+=parseInt(c.elements.content.css("margin-top"))||0,c.elements.tip.css({marginTop:g}))}function j(){var b=this;b.elements.title!==null&&b.elements.title.remove(),b.elements.title=a('<div class="'+b.options.style.classes.title+'">').css(m(b.options.style.title,!0)).css({zoom:a.browser.msie?1:0}).prependTo(b.elements.contentWrapper),b.options.content.title.text&&b.updateTitle.call(b,b.options.content.title.text),b.options.content.title.button!==!1&&typeof b.options.content.title.button=="string"&&(b.elements.button=a('<a class="'+b.options.style.classes.button+'" style="float:right; position: relative"></a>').css(m(b.options.style.button,!0)).html(b.options.content.title.button).prependTo(b.elements.title).click(function(a){b.status.disabled||b.hide(a)}))}function k(){function g(c){if(b.status.disabled===!0)return;b.options.hide.when.event=="inactive"&&(a(e).each(function(){d.bind(this+".qtip-inactive",f),b.elements.content.bind(this+".qtip-inactive",f)}),f()),clearTimeout(b.timers.show),clearTimeout(b.timers.hide),b.timers.show=setTimeout(function(){b.show(c)},b.options.show.delay)}function h(c){if(b.status.disabled===!0)return;if(b.options.hide.fixed===!0&&b.options.hide.when.event.search(/mouse(out|leave)/i)!==-1&&a(c.relatedTarget).parents("div.qtip[qtip]").length>0)return c.stopPropagation(),c.preventDefault(),clearTimeout(b.timers.hide),!1;clearTimeout(b.timers.show),clearTimeout(b.timers.hide),b.elements.tooltip.stop(!0,!0),b.timers.hide=setTimeout(function(){b.hide(c)},b.options.hide.delay)}var b,c,d,e;b=this,c=b.options.show.when.target,d=b.options.hide.when.target,b.options.hide.fixed&&(d=d.add(b.elements.tooltip));if(b.options.hide.when.event=="inactive"){e=["click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseenter","mouseleave","mouseover"];function f(c){if(b.status.disabled===!0)return;clearTimeout(b.timers.inactive),b.timers.inactive=setTimeout(function(){a(e).each(function(){d.unbind(this+".qtip-inactive"),b.elements.content.unbind(this+".qtip-inactive")}),b.hide(c)},b.options.hide.delay)}}else b.options.hide.fixed===!0&&b.elements.tooltip.bind("mouseover.qtip",function(){if(b.status.disabled===!0)return;clearTimeout(b.timers.hide)});b.options.show.when.target.add(b.options.hide.when.target).length===1&&b.options.show.when.event==b.options.hide.when.event&&b.options.hide.when.event!=="inactive"||b.options.hide.when.event=="unfocus"?(b.cache.toggle=0,c.bind(b.options.show.when.event+".qtip",function(a){b.cache.toggle==0?g(a):h(a)})):(c.bind(b.options.show.when.event+".qtip",g),b.options.hide.when.event!=="inactive"&&d.bind(b.options.hide.when.event+".qtip",h)),b.options.position.type.search(/(fixed|absolute)/)!==-1&&b.elements.tooltip.bind("mouseover.qtip",b.focus),b.options.position.target==="mouse"&&b.options.position.type!=="static"&&c.bind("mousemove.qtip",function(a){b.cache.mouse={x:a.pageX,y:a.pageY},b.status.disabled===!1&&b.options.position.adjust.mouse===!0&&b.options.position.type!=="static"&&b.elements.tooltip.css("display")!=="none"&&b.updatePosition(a)})}function l(b,c,d){var e,g,h,i,j,k;return e=this,d.corner=="center"?c.position:(g=a.extend({},b),i={x:!1,y:!1},j={left:g.left<a.fn.qtip.cache.screen.scroll.left,right:g.left+d.dimensions.width+2>=a.fn.qtip.cache.screen.width+a.fn.qtip.cache.screen.scroll.left,top:g.top<a.fn.qtip.cache.screen.scroll.top,bottom:g.top+d.dimensions.height+2>=a.fn.qtip.cache.screen.height+a.fn.qtip.cache.screen.scroll.top},h={left:j.left&&(d.corner.search(/right/i)!=-1||d.corner.search(/right/i)==-1&&!j.right),right:j.right&&(d.corner.search(/left/i)!=-1||d.corner.search(/left/i)==-1&&!j.left),top:j.top&&d.corner.search(/top/i)==-1,bottom:j.bottom&&d.corner.search(/bottom/i)==-1},h.left?(e.options.position.target!=="mouse"?g.left=c.position.left+c.dimensions.width:g.left=e.cache.mouse.x,i.x="Left"):h.right&&(e.options.position.target!=="mouse"?g.left=c.position.left-d.dimensions.width:g.left=e.cache.mouse.x-d.dimensions.width,i.x="Right"),h.top?(e.options.position.target!=="mouse"?g.top=c.position.top+c.dimensions.height:g.top=e.cache.mouse.y,i.y="top"):h.bottom&&(e.options.position.target!=="mouse"?g.top=c.position.top-d.dimensions.height:g.top=e.cache.mouse.y-d.dimensions.height,i.y="bottom"),g.left<0&&(g.left=b.left,i.x=!1),g.top<0&&(g.top=b.top,i.y=!1),e.options.style.tip.corner!==!1&&(g.corner=new String(d.corner),i.x!==!1&&(g.corner=g.corner.replace(/Left|Right|Middle/,i.x)),i.y!==!1&&(g.corner=g.corner.replace(/top|bottom/,i.y)),g.corner!==e.elements.tip.attr("rel")&&f.call(e,g.corner)),g)}function m(b,c){var d,e;d=a.extend(!0,{},b);for(e in d)c===!0&&e.search(/(tip|classes)/i)!==-1?delete d[e]:!c&&e.search(/(width|border|tip|title|classes|user)/i)!==-1&&delete d[e];return d}function n(a){return typeof a.tip!="object"&&(a.tip={corner:a.tip}),typeof a.tip.size!="object"&&(a.tip.size={width:a.tip.size,height:a.tip.size}),typeof a.border!="object"&&(a.border={width:a.border}),typeof a.width!="object"&&(a.width={value:a.width}),typeof a.width.max=="string"&&(a.width.max=parseInt(a.width.max.replace(/([0-9]+)/i,"$1"))),typeof a.width.min=="string"&&(a.width.min=parseInt(a.width.min.replace(/([0-9]+)/i,"$1"))),typeof a.tip.size.x=="number"&&(a.tip.size.width=a.tip.size.x,delete a.tip.size.x),typeof a.tip.size.y=="number"&&(a.tip.size.height=a.tip.size.y,delete a.tip.size.y),a}function o(){var b,c,d,e,f,g;b=this,d=[!0,{}];for(c=0;c<arguments.length;c++)d.push(arguments[c]);e=[a.extend.apply(a,d)];while(typeof e[0].name=="string")e.unshift(n(a.fn.qtip.styles[e[0].name]));return e.unshift(!0,{classes:{tooltip:"qtip-"+(arguments[0].name||"defaults")}},a.fn.qtip.styles.defaults),f=a.extend.apply(a,e),g=a.browser.msie?1:0,f.tip.size.width+=g,f.tip.size.height+=g,f.tip.size.width%2>0&&(f.tip.size.width+=1),f.tip.size.height%2>0&&(f.tip.size.height+=1),f.tip.corner===!0&&(f.tip.corner=b.options.position.corner.tooltip==="center"?!1:b.options.position.corner.tooltip),f}function p(a,b,c){var d={bottomRight:[[0,0],[b,c],[b,0]],bottomLeft:[[0,0],[b,0],[0,c]],topRight:[[0,c],[b,0],[b,c]],topLeft:[[0,0],[0,c],[b,c]],topMiddle:[[0,c],[b/2,0],[b,c]],bottomMiddle:[[0,0],[b,0],[b/2,c]],rightMiddle:[[0,0],[b,c/2],[0,c]],leftMiddle:[[b,0],[b,c],[0,c/2]]};return d.leftTop=d.bottomRight,d.rightTop=d.bottomLeft,d.leftBottom=d.topRight,d.rightBottom=d.topLeft,d[a]}function q(b){var c;return a("<canvas>").get(0).getContext?c={topLeft:[b,b],topRight:[0,b],bottomLeft:[b,0],bottomRight:[0,0]}:a.browser.msie&&(c={topLeft:[-90,90,0],topRight:[-90,90,-b],bottomLeft:[90,270,0],bottomRight:[90,270,-b]}),c}function r(){var a,b,c;a=this,c=a.getDimensions(),b='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; height:'+c.height+"px; width:"+c.width+'px" />',a.elements.bgiframe=a.elements.wrapper.prepend(b).children(".qtip-bgiframe:first")}a.fn.qtip=function(d,e){var f,g,h,i,j,k,l,m;if(typeof d=="string"){typeof a(this).data("qtip")!="object"&&a.fn.qtip.log.error.call(self,1,a.fn.qtip.constants.NO_TOOLTIP_PRESENT,!1);if(d=="api")return a(this).data("qtip").interfaces[a(this).data("qtip").current];if(d=="interfaces")return a(this).data("qtip").interfaces}else{d||(d={});if(typeof d.content!="object"||d.content.jquery&&d.content.length>0)d.content={text:d.content};typeof d.content.title!="object"&&(d.content.title={text:d.content.title}),typeof d.position!="object"&&(d.position={corner:d.position}),typeof d.position.corner!="object"&&(d.position.corner={target:d.position.corner,tooltip:d.position.corner}),typeof d.show!="object"&&(d.show={when:d.show}),typeof d.show.when!="object"&&(d.show.when={event:d.show.when}),typeof d.show.effect!="object"&&(d.show.effect={type:d.show.effect}),typeof d.hide!="object"&&(d.hide={when:d.hide}),typeof d.hide.when!="object"&&(d.hide.when={event:d.hide.when}),typeof d.hide.effect!="object"&&(d.hide.effect={type:d.hide.effect}),typeof d.style!="object"&&(d.style={name:d.style}),d.style=n(d.style),i=a.extend(!0,{},a.fn.qtip.defaults,d),i.style=o.call({options:i},i.style),i.user=a.extend(!0,{},d)}return a(this).each(function(){if(typeof d=="string"){k=d.toLowerCase(),h=a(this).qtip("interfaces");if(typeof h=="object")if(e===!0&&k=="destroy")while(h.length>0)h[h.length-1].destroy();else{e!==!0&&(h=[a(this).qtip("api")]);for(f=0;f<h.length;f++)k=="destroy"?h[f].destroy():h[f].status.rendered===!0&&(k=="show"?h[f].show():k=="hide"?h[f].hide():k=="focus"?h[f].focus():k=="disable"?h[f].disable(!0):k=="enable"&&h[f].disable(!1))}}else{l=a.extend(!0,{},i),l.hide.effect.length=i.hide.effect.length,l.show.effect.length=i.show.effect.length,l.position.container===!1&&(l.position.container=a(document.body)),l.position.target===!1&&(l.position.target=a(this)),l.show.when.target===!1&&(l.show.when.target=a(this)),l.hide.when.target===!1&&(l.hide.when.target=a(this)),g=a.fn.qtip.interfaces.length;for(f=0;f<g;f++)if(typeof a.fn.qtip.interfaces[f]=="undefined"){g=f;break}j=new b(a(this),l,g),a.fn.qtip.interfaces[g]=j,typeof a(this).data("qtip")=="object"?(typeof a(this).attr("qtip")=="undefined"&&(a(this).data("qtip").current=a(this).data("qtip").interfaces.length),a(this).data("qtip").interfaces.push(j)):a(this).data("qtip",{current:0,interfaces:[j]}),l.content.prerender===!1&&l.show.when.event!==!1&&l.show.ready!==!0?l.show.when.target.bind(l.show.when.event+".qtip-"+g+"-create",{qtip:g},function(b){m=a.fn.qtip.interfaces[b.data.qtip],m.options.show.when.target.unbind(m.options.show.when.event+".qtip-"+b.data.qtip+"-create"),m.cache.mouse={x:b.pageX,y:b.pageY},c.call(m),m.options.show.when.target.trigger(m.options.show.when.event)}):(j.cache.mouse={x:l.show.when.target.offset().left,y:l.show.when.target.offset().top},c.call(j))}})},a(document).ready(function(){a.fn.qtip.cache={screen:{scroll:{left:a(window).scrollLeft(),top:a(window).scrollTop()},width:a(window).width(),height:a(window).height()}};var b;a(window).bind("resize scroll",function(c){clearTimeout(b),b=setTimeout(function(){c.type==="scroll"?a.fn.qtip.cache.screen.scroll={left:a(window).scrollLeft(),top:a(window).scrollTop()}:(a.fn.qtip.cache.screen.width=a(window).width(),a.fn.qtip.cache.screen.height=a(window).height());for(i=0;i<a.fn.qtip.interfaces.length;i++){var b=a.fn.qtip.interfaces[i];b.status.rendered===!0&&(b.options.position.type!=="static"||b.options.position.adjust.scroll&&c.type==="scroll"||b.options.position.adjust.resize&&c.type==="resize")&&b.updatePosition(c,!0)}},100)}),a(document).bind("mousedown.qtip",function(b){a(b.target).parents("div.qtip").length===0&&a(".qtip[unfocus]").each(function(){var c=a(this).qtip("api");a(this).is(":visible")&&!c.status.disabled&&a(b.target).add(c.elements.target).length>1&&c.hide(b)})})}),a.fn.qtip.interfaces=[],a.fn.qtip.log={error:function(){return this}},a.fn.qtip.constants={},a.fn.qtip.defaults={content:{prerender:!1,text:!1,url:!1,data:null,title:{text:!1,button:!1}},position:{target:!1,corner:{target:"bottomRight",tooltip:"topLeft"},adjust:{x:0,y:0,mouse:!0,screen:!1,scroll:!0,resize:!0},type:"absolute",container:!1},show:{when:{target:!1,event:"mouseover"},effect:{type:"fade",length:100},delay:140,solo:!1,ready:!1},hide:{when:{target:!1,event:"mouseout"},effect:{type:"fade",length:100},delay:0,fixed:!1},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}},a.fn.qtip.styles={defaults:{background:"white",color:"#111",overflow:"hidden",textAlign:"left",width:{min:0,max:250},padding:"5px 9px",border:{width:1,radius:0,color:"#d3d3d3"},tip:{corner:!1,color:!1,size:{width:13,height:13},opacity:1},title:{background:"#e1e1e1",fontWeight:"bold",padding:"7px 12px"},button:{cursor:"pointer"},classes:{target:"",tip:"qtip-tip",title:"qtip-title",button:"qtip-button",content:"qtip-content",active:"qtip-active"}},cream:{border:{width:3,radius:0,color:"#F9E98E"},title:{background:"#F0DE7D",color:"#A27D35"},background:"#FBF7AA",color:"#A27D35",classes:{tooltip:"qtip-cream"}},light:{border:{width:3,radius:0,color:"#E2E2E2"},title:{background:"#f1f1f1",color:"#454545"},background:"white",color:"#454545",classes:{tooltip:"qtip-light"}},dark:{border:{width:3,radius:0,color:"#303030"},title:{background:"#404040",color:"#f3f3f3"},background:"#505050",color:"#f3f3f3",classes:{tooltip:"qtip-dark"}},red:{border:{width:3,radius:0,color:"#CE6F6F"},title:{background:"#f28279",color:"#9C2F2F"},background:"#F79992",color:"#9C2F2F",classes:{tooltip:"qtip-red"}},green:{border:{width:3,radius:0,color:"#A9DB66"},title:{background:"#b9db8c",color:"#58792E"},background:"#CDE6AC",color:"#58792E",classes:{tooltip:"qtip-green"}},blue:{border:{width:3,radius:0,color:"#ADD9ED"},title:{background:"#D0E9F5",color:"#5E99BD"},background:"#E5F6FE",color:"#4D9FBF",classes:{tooltip:"qtip-blue"}}}}(jQuery),($.fn.friendsSearch=function(a){function g(a){$list=c.find("#adding-list"),newHtml=window.tmpl($("#template-action-list-friend").html(),{user:a}),c.find("#to-add-"+a.id).length===0&&($(newHtml).attr("id","to-add-"+a.id).data("user",a).appendTo($list),d.push(a),c.find("#personal-message").removeClass("hidden")),e.empty(),c.find("#active-search-box").val("").focus()}function h(a){var b=encodeURI($(a).val().trim().replace(".","^"));b.length>2?j(b):b.length==0&&($list=e.empty())}function j(a){$.ajax({url:"/users/search/"+a,type:"GET",dataType:"json",success:function(a){e.empty();if(c.find("#active-search-box").val().length<a.query)return;for(f in a.results)userHtml=window.tmpl($("#template-search-friend-result").html(),{user:a.results[f]}),$(userHtml).data("user",a.results[f]).appendTo(e);c.find(".friend").bind("click",function(a){g($(this).data("user"))})}})}var b=$.extend({section:0},a),c=$(this).data("section",b.section),d=[],e=c.find("#search-list");c.find("#active-search-box").bind("keyup",function(a){a.keyCode===13?e.children(".friend").size()===1?g($(e.children(".friend")[0]).data("user")):validateEmail(this.value)&&(email=this.value,this.value="",this.focus(),g({id:email,first_name:email,last_name:""})):h(this)}),c.find(".click-to-remove").live("click",function(a){for(i in d)d[i].id==$(this).parent().data("user").id&&(d.splice(i,1),d.length==0&&$("#personal-message").addClass("hidden"));$(this).parent().remove()}),c.find(".btn-primary.next").bind("click",function(a){b.next(d,c)})})(),$(".friend-available:not(.none)").live("click",function(){$this=$(this),scheduleId=$this.toggleClass("showing").data("schedule"),color=$this.data("color"),makeFriendScheduleCall($this,scheduleId,color)}),$(".friend-schedule").live("click",function(){$this=$(this),scheduleId=$this.toggleClass("showing").data("schedule"),makeFriendScheduleCall($this,scheduleId)}),!function(a){a(function(){"use strict",a.support.transition=function(){var b=document.body||document.documentElement,c=b.style,d=c.transition!==undefined||c.WebkitTransition!==undefined||c.MozTransition!==undefined||c.MsTransition!==undefined||c.OTransition!==undefined;return d&&{end:function(){var b="TransitionEnd";return a.browser.webkit?b="webkitTransitionEnd":a.browser.mozilla?b="transitionend":a.browser.opera&&(b="oTransitionEnd"),b}()}}()})}(window.jQuery),!function(a){function c(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),d.call(b)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),d.call(b)})}function d(a){this.$element.hide().trigger("hidden"),e.call(this)}function e(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(f,this)):f.call(this)):b&&b()}function f(){this.$backdrop.remove(),this.$backdrop=null}function g(){var b=this;this.isShown&&this.options.keyboard?a(document).on("keyup.dismiss.modal",function(a){a.which==27&&b.hide()}):this.isShown||a(document).off("keyup.dismiss.modal")}"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this))};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this;if(this.isShown)return;a("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),g.call(this),e.call(this,function(){var c=a.support.transition&&b.$element.hasClass("fade");!b.$element.parent().length&&b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in"),c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();if(!this.isShown)return;var e=this;this.isShown=!1,a("body").removeClass("modal-open"),g.call(this),this.$element.trigger("hide").removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?c.call(this):d.call(this)}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({},e.data(),c.data());b.preventDefault(),e.modal(f)})})}(window.jQuery),!function(a){function d(){a(b).parent().removeClass("open")}"use strict";var b='[data-toggle="dropdown"]',c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),e=c.attr("data-target"),f,g;return e||(e=c.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),f=a(e),f.length||(f=c.parent()),g=f.hasClass("open"),d(),!g&&f.toggleClass("open"),!1}},a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a(function(){a("html").on("click.dropdown.data-api",d),a("body").on("click.dropdown.data-api",b,c.prototype.toggle)})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find(".in"),e;d&&d.length&&(e=d.data("collapse"),d.collapse("hide"),e||d.data("collapse",null)),this.$element[b](0),this.transition("addClass","show","shown"),this.$element[b](this.$element[0][c])},hide:function(){var a=this.dimension();this.reset(this.$element[a]()),this.transition("removeClass","hide","hidden"),this.$element[a](0)},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){c=="show"&&e.reset(),e.$element.trigger(d)};this.$element.trigger(c)[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();a(e).collapse(f)})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger!="manual"&&(e=this.options.trigger=="hover"?"mouseenter":"focus",f=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(e,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);!c.options.delay||!c.options.delay.show?c.show():(c.hoverState="in",setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show))},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);!c.options.delay||!c.options.delay.hide?c.hide():(c.hoverState="out",setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide))},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.css(g).addClass(f).addClass("in")}},setContent:function(){var a=this.tip();a.find(".tooltip-inner").html(this.getTitle()),a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.remove()})}var b=this,c=this.tip();c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d():c.remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a=(a||"").toString().replace(/(^\s*|\s*$)/,""),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var b=this.tip(),c=this.getTitle(),d=this.getContent();b.find(".popover-title")[a.type(c)=="object"?"append":"html"](c),b.find(".popover-content > *")[a.type(d)=="object"?"append":"html"](d),b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content),a=a.toString().replace(/(^\s*|\s*$)/,""),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery)